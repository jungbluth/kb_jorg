#
# define display information
#
name     : Circularize MAGs using Jorg - v1.0
subtitle : Improve and circularize individual genomes from shotgun metagenomics data
tooltip  : Improve and circularize individual genomes from shotgun metagenomics data

icon: jorg.png

screenshots: []

#
# define a set of similar methods that might be useful to the user
#
suggestions:
    apps:
        related:
            [kb_maxbin, kbase-metabat, kb_concoct, kb_cocacola]
        next:
            [kb_Msuite, MetaAnnot]
    methods:
        related:
            []
        next:
            ["kb_Msuite.run_checkM_lineage_wf"]

#
# Configure the display and description of parameters
#
parameters :
    assembly_ref :
        ui-name : Assembly
        short-hint : Genome assembly object
        long-hint  : Genome assembly or bin that you want to improve

    reads_file :
        ui-name : Reads
        short-hint : Reads object (PairedEndLibrary/SingleEndLibrary) upon which Jorg will be run
        long-hint  : Reads object (PairedEndLibrary/SingleEndLibrary) upon which Jorg will be run

    read_mapping_tool :
        ui-name : Read Mapping Tool
        short-hint : tool to use for read mapping (default BBmap)
        long-hint  : tool to use for read mapping - options BBmap, Bowtie2 (default), Bowtie2 (very-sensitive) - (default BBmap)

    kmer_size :
        ui-name : Kmer Length
        short-hint : specify kmer length for baiting (default 33)
        long-hint  : specify kmer length for baiting (default 33)

    min_coverage :
        ui-name : Minimum Coverage Value
        short-hint : minimum coverage value (default 50x)
        long-hint  : minimum coverage value of the genome you want to improve (default 50x)

    num_iterations :
        ui-name : Number of Iterations
        short-hint : specify a number of iterations to use (default 5)
        long-hint  : specify a number of iterations to use (default 5)

description : |

    <p>Jorg is a tool to help improve or circularize genomes from shotgun metagenomics data.</p>
    <p><hr></p>
    <p><hr></p>
    <p><i>Implemented for KBase by <a href="mailto:sjungbluth@lbl.gov">Sean Jungbluth(sjungbluth@lbl.gov)</a></i></p>
    <p><hr></p>
    <p>This method assumes that you already have a pipeline that you like to use for assembling your metagenomes and creating bins.</p>
    <p><hr></p>
    <p><b>Configuration:</b></p>
    <p><b><i>Assembly Object:</i></b> The Assembly object is a collection of assembled genome fragments, called "contigs".  These are the items that CONCOCT will bin.  Currently only a single Assembly object is accepted by the CONCOCT App.</p>
    <p><b><i>BinnedContig Object Name:</i></b> The BinnedContig Object represents the directory of binned contigs created by CONCOCT. This object can be used for downstream analysis</p>
    <p><b><i>Read Library Object:</i></b> The read libraries are aligned to the assembly using bbmap, and provide the abundance information for each contig that roughly follows the species abundance.</p>
    <p><b><i>Minimum Contig Length:</i></b> Contigs that are too short may slow down analysis and not give statistically meaningful nucleotide composition profiles.  A value of 1000 - 2500 bp is a reasonable cutoff.</p>
    <p><b><i>Contig Split Size:</i></b> Contigs are split before clustering to minimize the bias imposed by very large contigs. A value of 5000-10000 bp is a reasonable cutoff.</p>
    <p><b><i>Contig Split Overlap:</i></b> Contigs split before clustering can have varying degrees of overlap.  A value of 0 is most often used.</p>
    <p><b><i>Kmer Length:</i></b> Size of the kmers used during profiling.  A default value of 4 is reasonable to start with.</p>
    <p><hr></p>
    <p><b>Output:</b></p>
    <p><b><i>Output Object:</i></b>The BinnedContig Object represents the directory of binned contigs created by CONCOCT. This object can be used for downstream analysis.</p>
    <p><b><i>Output Bin Summary Report:</i></b>The number of bins produced, the number of contigs that were binned and the total number of contigs in the assembly.</p>
    <p><b><i>Downloadable files:</i></b> The enitre output of the CONCOCT run may be downloaded as a zip file. This zip file also contains a table of read-depth coverage per contig ("*.depth.txt")</p>

publications:
    -
        display-text : |
            Lui LM, Nielsen TN, Arkin AP. A method for achieving complete microbial genomes and better quality bins from metagenomics data. bioRxiv. 2020. doi:10.1101/2020.03.05.979740
        link: https://doi.org/10.1101/2020.03.05.979740

    -
        display-text : |
            Jorg source:
        link: https://github.com/jungbluth/Jorg
